---
layout: post
title:  "Multi Agent Pickup and Delivery: A short overview"
date:   2023-09-01 12:00:00 +0200
permalink: /mapd/
categories: science review planning
---

This is a sort of a review of the current state of the art on Multi Agent Pickup and Delivery.
I recently stumbled upon some papers in this area, and this is my way of trying to get a grasp on the topic and its difficulties and aproaches to solve them.

# Problem setting
Multi agent pickup and delivery (MAPD) is closely related to Multi Agent Path Finding (MAPF).
In some settings, MAPD could be seen as en extension to MAPF.

MAPF deals with path finding for multiple agents, typically it is the same agents, in a shared workspace.
MAPD extends this problem to the assignment of tasks to agents, and finding paths for it.
MAPD is also typically interested in settings with more tasks than agents, such that a planner needs to decide how to assign tasks to agents and in which order.
Often, it is assumed that tasks are not know a priori, but have a 'release time', i.e., they only become known at a certain time during execution of other tasks.

This is a realistic setting in warehouse scenarios.

Summarizing, the assumptions in most MAPD papers are:

- same agents, shared workspace
- not all tasks known initially

Before discussing some MAPD solvers, we will have a brief look at MAPF solvers, since many MAPD approaches use a MAPF solver for planning.

#### MAPF
CBS

#### Generic approach
Assignment:
...

As for planning: 
With the assumption of equal agents, and a shared workspace, one can build a graph and plan on this graph, while adding the constraints that no vertex can be doubly assigned, and edges can not be crossed by two agents at the same time.


# Papers
TODO: discuss/summarize all approaches briefly

- [Lifelong Multi-Agent Path Finding in Large-Scale Warehouses*](https://arxiv.org/pdf/2005.07371.pdf)
- [Task and Path Planning for Multi-Agent Pickup and Delivery](http://idm-lab.org/bib/abstracts/papers/aamas19a.pdf)
- [A Multi-Label A* Algorithm for Multi-Agent Pathfinding](https://ojs.aaai.org/index.php/ICAPS/article/view/3474/3342)
- [Multi-Goal Multi-Agent Pickup and Delivery*](https://arxiv.org/pdf/2208.01223.pdf)
- [MS*: A New Exact Algorithm for Multi-agent Simultaneous Multi-goal Sequencing and Path Finding](https://arxiv.org/pdf/2103.09979.pdf)

# Connection to Multi Agent Task and Motion Planning
In multi agent task and motion planning, tasks have to be assigned to robots as well, and paths have to be planned.
That means there should be an obvious overlap betweeen the two areas of research.

I am going to do a bit of self promotion here: In [], we proposed a greedy multi agent TAMP solver, and in [], we showed a route towards optimizing the resulting plans.

The approach is based on decomposing the task sequence, planning them separately (i.e. per robot, in the order they should be done), and take previously planned paths into account.
While that works well, it is clearly suboptimal. 
One thing I am interested in is how suboptimal this is, and to figure that out, I want to have an optimal planner (no matter how slow, or if it only works for a specific subset of TAMP settings).
It turns out that the MAPD people do not have an optimal planner either.

The other very interesting thing would be the application of findings from the MAPD/MAPF community to the MA-TAMP case, and speed up the solution time.
One of the difficulties here is that in the TAMP case, it might occur that something is infeasible if it is done in the wrong order, which does not happen in the MAPD setting.

# Outlook
I am interested in developing an optimal planner for a given task assignment.
One possible approach would be using sampling based planners.
